<!-- Generated by SpecStory -->

# Process Troubleshooting: Current Directory and Env (2025-04-06 13:45:53)

_**User**_

now it fails with the following but without logs which probably means that it tries to start it somewhere. How to figure out the process current dir and env? 

---

_**Assistant**_



---

Let's diagnose why the process is failing. I'll help you check the current directory and environment when the process starts.

---

```bash
ps aux | grep "shelly-forge.js" | grep -v grep
```

```
--------------------------------------------------------------------------------
-----------------------------

```

---

Let's check if we can run the script directly to see the error message:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && node dist/shelly-forge.js mcp
```

```
~/workspace/home/shelly-forge (main*) ¬ª cd /Users/milkoslavov/workspace/home/shelly-forge && node dist/shelly
<ce/home/shelly-forge && node dist/shelly-forge.js mcp
^C
^C
-------------------------------------------------------------------------------------------------------------
~/workspace/home/shelly-forge (main*) ¬ª                                       milkoslavov@Milkos-MacBook-Air
```

---

Let's examine the script and check for any logging setup:

---

<details>
            <summary>Listed current directory ‚Ä¢ **19** results</summary>
        
| Name |
|-------|
| üìÅ `.git` |
| üìÅ `.shelly-forge` |
| üìÑ `.gitignore` |
| üìÑ `package.json` |
| üìÅ `dist` |
| üìÅ `src` |
| üìÅ `.cursor` |
| üìÑ `tsconfig.json` |
| üìÑ `package-lock.json` |
| üìÅ `node_modules` |
| üìÅ `docs` |
| üìÅ `tmp` |
| üìÑ `README.md` |
| üìÅ `.specstory` |
| üìÅ `types` |
| üìÅ `templates` |
| üìÑ `.npmignore` |
| üìÑ `CONTRIBUTING.md` |
| üìÑ `LICENSE` |

</details>

---

Let's look at the source code:

---

<details>
            <summary>Searched codebase "shelly-forge.js mcp" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `.cursor/mcp.json` | L1-11 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L551-601 |
| `src/mcp-server.ts` | L1-44 |
| `src/commands/mcp.ts` | L12-24 |
| `src/commands/mcp.ts` | L4-6 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L505-551 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L403-459 |
| `.specstory/history/2025-04-06_08-35-add-mcp-command-to-start-service.md` | L91-133 |
| `package.json` | L1-57 |
| `.specstory/history/2025-04-06_08-25-software-project-tool-improvements.md` | L106-175 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L60-119 |
| `.specstory/history/2025-04-06_08-35-add-mcp-command-to-start-service.md` | L1-91 |
| `.specstory/history/2025-04-06_09-50-merging-commands-and-tools-in-codebase.md` | L143-244 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L601-648 |
| `.specstory/history/2025-04-06_09-59-reusable-function-for-tool-loading.md` | L602-708 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L1-60 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L1-178 |
| `.specstory/history/2025-04-06_04-33-framework-analysis-for-ai-solution-development.md` | L204-259 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L467-551 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L237-467 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L459-505 |
| `.specstory/history/2025-04-06_09-50-merging-commands-and-tools-in-codebase.md` | L85-143 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L648-704 |
| `templates/default/tsconfig.json` | L1-17 |
| `.specstory/history/2025-04-06_04-00-mcp-server-plan-for-shelly-devices.md` | L119-403 |

</details>

---

Let's look for any log file configurations in the project:

---

<details>
            <summary>Searched codebase "logger configuration" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/utils/logger.ts` | L20-68 |
| `src/utils/logger.ts` | L1-20 |
| `src/utils/logger.ts` | L68-71 |
| `src/utils/logger.ts` | L71-75 |
| `src/utils/logger.ts` | L75-79 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L917-950 |
| `src/commands/mcp.ts` | L12-24 |
| `src/commands/logs.ts` | L1-7 |
| `src/mcp-server.ts` | L1-44 |
| `src/commands/logs.ts` | L88-103 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L630-690 |
| `src/commands/logs.ts` | L44-88 |
| `src/commands/debug.ts` | L1-7 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L1011-1095 |
| `src/commands/debug.ts` | L42-71 |
| `src/commands/debug.ts` | L18-42 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L950-1011 |
| `src/commands/mcp.ts` | L1-4 |
| `src/commands/logs.ts` | L17-44 |
| `.specstory/history/2025-04-06_09-59-reusable-function-for-tool-loading.md` | L347-401 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L237-467 |
| `src/commands/deploy.ts` | L18-64 |
| `.specstory/history/2025-04-06_10-16-mcp-server-log-redirection-issue.md` | L178-237 |
| `src/commands/build.ts` | L17-66 |
| `src/commands/build.ts` | L1-9 |

</details>

---

Now, let's look at how we can debug this issue:

---

<details>
            <summary>Listed directory .shelly-forge/logs ‚Ä¢ **1** results</summary>
        
| Name |
|-------|
| üìÑ `console.log` |

</details>

---

Let's check the log content:

---

Read file: .shelly-forge/logs/console.log

---

Let's look at how the MCP server is executed in Cursor:

---

Read file: .cursor/mcp.json

---

Let's try to run the MCP server with debug environment variables to see more information:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && DEBUG=* node dist/shelly-forge.js mcp
```

```
~/workspace/home/shelly-forge (main*) ¬ª cd /Users/milkoslavov/workspace/home/shelly-forge && DEBUG=* node dis
<shelly-forge && DEBUG=* node dist/shelly-forge.js mcp
^C
-------------------------------------------------------------------------------------------------------------
~/workspace/home/shelly-forge (main*) ¬ª                                       milkoslavov@Milkos-MacBook-Air
```

---

Let's check for any issues in the source code that might be causing the MCP server to fail silently:

---

Read file: src/commands/mcp.ts

---

Let's update our server to run with better debugging info:

---

```diff
  
  export async function main() {
-     logger.enableConsole(false);
-     logger.debug("Starting Shelly Forge MCP Server...");
+     try {
+         logger.enableConsole(true); // Enable console output for debugging
+         logger.log("Starting Shelly Forge MCP Server...");
  
-     // Load command tools
-     try {
-         const commandTools = await loadCommandTools();
-         for (const tool of commandTools) {
-             // Adapt the callback to return in MCP format
-             const adaptedCallback = async (args: any) => {
-                 try {
-                     const result = await tool.callback(args);
-                     return { content: [{ type: "text" as const, text: result || "Command executed successfully" }] };
-                 } catch (error) {
-                     logger.error(`Command execution error in ${tool.name}`, error);
-                     return { content: [{ type: "text" as const, text: `Command failed: ${(error as Error).message}` }] };
-                 }
-             };
+         // Load command tools
+         try {
+             const commandTools = await loadCommandTools();
+             logger.log(`Loaded ${commandTools.length} command tools`);
+             
+             for (const tool of commandTools) {
+                 // Adapt the callback to return in MCP format
+                 const adaptedCallback = async (args: any) => {
+                     try {
+                         const result = await tool.callback(args);
+                         return { content: [{ type: "text" as const, text: result || "Command executed successfully" }] };
+                     } catch (error) {
+                         logger.error(`Command execution error in ${tool.name}`, error);
+                         return { content: [{ type: "text" as const, text: `Command failed: ${(error as Error).message}` }] };
+                     }
+                 };
  
-             mcp.tool(
-                 tool.name,
-                 tool.description,
-                 tool.inputSchema.shape,
-                 adaptedCallback
-             );
-         }
-     } catch (error) {
-         logger.error("Failed to load command tools", error);
-     }
+                 mcp.tool(
+                     tool.name,
+                     tool.description,
+                     tool.inputSchema.shape,
+                     adaptedCallback
+                 );
+                 logger.log(`Registered tool: ${tool.name}`);
+             }
+         } catch (error) {
+             logger.error("Failed to load command tools", error);
+         }
  
-     const transport = new StdioServerTransport();
-     await mcp.connect(transport);
-     logger.debug("Shelly Forge MCP Server running and connected.");
+         logger.log("Connecting MCP Server transport...");
+         try {
+             const transport = new StdioServerTransport();
+             await mcp.connect(transport);
+             logger.log("Shelly Forge MCP Server running and connected.");
+         } catch (error) {
+             logger.error("Failed to connect MCP transport", error);
+             throw error; // Make sure error is propagated
+         }
+     } catch (error) {
+         logger.error("Critical MCP server error", error);
+         throw error; // Ensure errors are propagated up
+     }
  }
```

---

Let's rebuild the project to apply our changes:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && npm run build
```

```
~/workspace/home/shelly-forge (main*) ¬ª cd /Users/milkoslavov/workspace/home/shelly-forge && npm run build

> shelly-forge@0.1.4 build
> tsc

-------------------------------------------------------------------------------------------------------------
~/workspace/home/shelly-forge (main*) ¬ª                                       milkoslavov@Milkos-MacBook-Air
```

---

Now let's try running the MCP server directly with more debugging information:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && NODE_DEBUG=* node dist/shelly-forge.js mcp
```

```
~/workspace/home/shelly-forge (main*) ¬ª 
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: Promise { undefined },
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/string.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/string.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/string.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/branded.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/branded.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/branded.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/errorM
essages.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/er
rorMessages.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/erro
rMessages.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/errorM
essages.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/er
rorMessages.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/erro
rMessages.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Refs.j
s',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Re
fs.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Refs
.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: Promise { undefined },
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/any.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/any.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/any.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/array.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/array.js'
    }
  },
  linked: Promise {
    [Array(3): null prototype] [
      [ModuleJob],
      [ModuleJob],
      [ModuleJob]
    ]
  },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/array.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/bigint.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/bigint.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/bigint.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/boolean.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/boolean.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/boolean.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/branded.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/branded.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/branded.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/catch.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/catch.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/catch.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/date.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/date.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/date.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/default.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/default.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/default.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/effects.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/effects.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/effects.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/enum.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/enum.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/enum.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/intersection.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/intersection.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/intersection.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/literal.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/literal.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/literal.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/map.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/map.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/map.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/nativeEnum.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/nativeEnum.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/nativeEnum.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/never.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/never.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/never.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/null.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/null.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/null.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/nullable.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/nullable.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/nullable.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/number.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/number.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/number.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/object.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/object.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/object.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/optional.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/optional.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/optional.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/pipeline.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/pipeline.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/pipeline.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/promise.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/promise.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/promise.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/record.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/record.js'
    }
  },
  linked: Promise {
    [Array(4): null prototype] [
      [ModuleJob],
      [ModuleJob],
      [ModuleJob],
      [ModuleJob]
    ]
  },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/record.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/set.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/set.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/set.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/string.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/string.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/string.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/tuple.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/tuple.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/tuple.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/undefined.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/undefined.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/undefined.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/union.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/union.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/union.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/unknown.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/unknown.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/unknown.js'
  }
}
ESM 39854: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/readonly.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/readonly.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/readonly.js'
  }
}
Starting Shelly Forge MCP Server...
Loaded 8 command tools
Registered tool: build
Registered tool: create
Registered tool: debug
Registered tool: deploy
Registered tool: discover
Registered tool: init
Registered tool: logs
Registered tool: mcp
Connecting MCP Server transport...
STREAM 39854: resume
Shelly Forge MCP Server running and connected.
STREAM 39854: resume false
STREAM 39854: read 0
STREAM 39854: need readable false
STREAM 39854: length less than watermark true
STREAM 39854: do read
NET 39854: _read - n 0 isConnecting? false hasHandle? true
NET 39854: Socket._handle.readStart
STREAM 39854: flow
STREAM 39854: read undefined
STREAM 39854: need readable true
STREAM 39854: length less than watermark true
STREAM 39854: reading, ended or constructing false
^C
STREAM 39854: push <Buffer 0a>
^C
STREAM 39854: maybeReadMore read 0
STREAM 39854: read 0
STREAM 39854: need readable true
STREAM 39854: length less than watermark true
STREAM 39854: do read
NET 39854: _read - n 0 isConnecting? false hasHandle? true

```

---

Let's check the file structure for load-commands.js which might be causing the issue:

---

<details>
            <summary>Listed directory dist ‚Ä¢ **10** results</summary>
        
| Name |
|-------|
| üìÑ `solutions-config.js` |
| üìÑ `shelly-forge.js` |
| üìÑ `shelly-device.js` |
| üìÑ `script-hash-cache.js` |
| üìÑ `mcp-server.js` |
| üìÑ `load-commands.js` |
| üìÅ `utils` |
| üìÅ `commands` |
| üìÅ `tools` |
| üìÅ `mcp` |

</details>

---

Let's check the load-commands.js file:

---

Read file: dist/load-commands.js

---

Now let's run the MCP server with more focused debugging:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && node --trace-warnings dist/shelly-forge.js mcp
```

```
Starting Shelly Forge MCP Server...
Loaded 8 command tools
Registered tool: build
Registered tool: create
Registered tool: debug
Registered tool: deploy
Registered tool: discover
Registered tool: init
Registered tool: logs
Registered tool: mcp
Connecting MCP Server transport...
Shelly Forge MCP Server running and connected.
^C

```

---

Based on my findings, here's what's happening and what you should do to debug the MCP server issue:

1. The MCP server is set up in `src/mcp-server.ts` and is called from `src/commands/mcp.ts`
2. You're seeing the error in Cursor when it tries to launch the server with the command `node /Users/milkoslavov/workspace/home/shelly-forge/dist/shelly-forge.js mcp`
3. I've modified the logging to enable console output for better debugging

To further debug this issue:

1. Check the current working directory by adding this to your mcp-server.ts file:

---

```diff
      try {
          logger.enableConsole(true); // Enable console output for debugging
+         logger.log(`Current working directory: ${process.cwd()}`);
+         logger.log(`Environment variables: ${JSON.stringify(process.env, null, 2)}`);
          logger.log("Starting Shelly Forge MCP Server...");
  
```

---

Let's rebuild and try to run the server directly:

---

```bash
cd /Users/milkoslavov/workspace/home/shelly-forge && npm run build && node dist/shelly-forge.js mcp
```

```

> shelly-forge@0.1.4 build
> tsc

Current working directory: /Users/milkoslavov/workspace/home/shelly-forge
Environment variables: {
  "MallocNanoZone": "0",
  "USER": "milkoslavov",
  "COMMAND_MODE": "unix2003",
  "__CFBundleIdentifier": "com.todesktop.230313mzl4w4u92",
  "PATH": "/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/versions/node/v22.11.0/b
in:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:
/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.c
ryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/applei
nternal/bin:/Library/Apple/usr/bin:/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/
versions/node/v22.11.0/bin:/Users/milkoslavov/.foundry/bin",
  "LOGNAME": "milkoslavov",
  "SSH_AUTH_SOCK": "/private/tmp/com.apple.launchd.bBE2kiGuND/Listeners",
  "HOME": "/Users/milkoslavov",
  "SHELL": "/bin/zsh",
  "TMPDIR": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/",
  "__CF_USER_TEXT_ENCODING": "0x1F5:0x0:0x0",
  "XPC_SERVICE_NAME": "0",
  "XPC_FLAGS": "0x0",
  "ORIGINAL_XDG_CURRENT_DESKTOP": "undefined",
  "CURSOR_TRACE_ID": "690078bf20804b1da911d4f92b7af32c",
  "SHLVL": "1",
  "PWD": "/Users/milkoslavov/workspace/home/shelly-forge",
  "OLDPWD": "/Users/milkoslavov/workspace/home/shelly-forge",
  "HOMEBREW_PREFIX": "/opt/homebrew",
  "HOMEBREW_CELLAR": "/opt/homebrew/Cellar",
  "HOMEBREW_REPOSITORY": "/opt/homebrew",
  "INFOPATH": "/opt/homebrew/share/info:/opt/homebrew/share/info:",
  "NVM_DIR": "/Users/milkoslavov/.nvm",
  "NVM_CD_FLAGS": "-q",
  "NVM_BIN": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin",
  "NVM_INC": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/include/node",
  "ZSH": "/Users/milkoslavov/.oh-my-zsh",
  "PAGER": "less",
  "LESS": "-R",
  "LSCOLORS": "Gxfxcxdxbxegedabagacad",
  "LS_COLORS": "di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",
  "TERM_PROGRAM": "vscode",
  "TERM_PROGRAM_VERSION": "0.48.7",
  "LANG": "en_US.UTF-8",
  "COLORTERM": "truecolor",
  "GIT_ASKPASS": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass.sh",
  "VSCODE_GIT_ASKPASS_NODE": "/Applications/Cursor.app/Contents/Frameworks/Cursor Helper (Plugin).app/Content
s/MacOS/Cursor Helper (Plugin)",
  "VSCODE_GIT_ASKPASS_EXTRA_ARGS": "",
  "VSCODE_GIT_ASKPASS_MAIN": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass-mai
n.js",
  "VSCODE_GIT_IPC_HANDLE": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/vscode-git-893f8cbfaf.sock",
  "VSCODE_INJECTION": "1",
  "ZDOTDIR": "/Users/milkoslavov",
  "USER_ZDOTDIR": "/Users/milkoslavov",
  "TERM": "xterm-256color",
  "_": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin/node"
}
Starting Shelly Forge MCP Server...
Loaded 8 command tools
Registered tool: build
Registered tool: create
Registered tool: debug
Registered tool: deploy
Registered tool: discover
Registered tool: init
Registered tool: logs
Registered tool: mcp
Connecting MCP Server transport...
Shelly Forge MCP Server running and connected.
^C

```

---

Let's try to make the issue more visible by adding better debugging for stdio transport errors:

---

Read file: src/shelly-forge.ts

---

Based on my analysis and the issues with the MCP server, here's what's happening:

1. The MCP server starts but fails with "Client closed" error in Cursor
2. The server uses StdioServerTransport which relies on standard input and output
3. When running from Cursor, there's a connectivity issue between Cursor and the MCP server

Here's what you should do to debug:

1. Create a debug script that writes detailed logs to a file:

---

```diff
      debug: (message: string): void => {
          // Write to console and file with DEBUG prefix
+         if (enableConsole) {
+             console.log(`DEBUG: ${message}`);
+         }
          logStream.write(formatMessage(`DEBUG: ${message}`));
      },
              console.error(errorMsg);
          }
-         logStream.write(formatMessage(errorMsg));
+         logStream.write(formatMessage(`ERROR: ${errorMsg}`));
      },
  
```

---

Now let's build and create a debugging script to help identify the issue:

---

```diff
- 
+ #!/bin/bash
+ 
+ # Clear existing logs
+ rm -f .shelly-forge/logs/console.log
+ 
+ # Build the project
+ npm run build
+ 
+ # Set debugging environment variables
+ export DEBUG=*
+ export NODE_DEBUG=*
+ 
+ # Run the MCP command with full output capture
+ node dist/shelly-forge.js mcp > mcp-stdout.log 2> mcp-stderr.log
+ 
+ # Display log file after execution
+ echo "===== MCP STDERR ====="
+ cat mcp-stderr.log
+ echo "===== MCP STDOUT ====="
+ cat mcp-stdout.log
+ echo "===== CONSOLE LOG ====="
+ cat .shelly-forge/logs/console.log 
```

---

Let's make the script executable and run it:

---

```bash
chmod +x debug-mcp.sh && ./debug-mcp.sh
```

```
~/workspace/home/shelly-forge (main*) ¬ª 
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/errorM
essages.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/er
rorMessages.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/erro
rMessages.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: Promise { undefined },
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod/lib/index.mjs'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/any.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/any.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/any.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/array.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/array.js'
    }
  },
  linked: Promise {
    [Array(3): null prototype] [
      [ModuleJob],
      [ModuleJob],
      [ModuleJob]
    ]
  },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/array.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/bigint.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/bigint.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/bigint.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/boolean.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/boolean.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/boolean.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/branded.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/branded.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/branded.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/catch.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/catch.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/catch.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/date.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/date.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/date.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/default.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/default.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/default.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/effects.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/effects.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/effects.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/enum.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/enum.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/enum.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/intersection.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/intersection.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/intersection.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/literal.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/literal.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/literal.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/map.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/map.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/map.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/nativeEnum.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/nativeEnum.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/nativeEnum.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/never.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/never.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/never.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/null.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/null.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/null.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/nullable.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/nullable.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/nullable.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/number.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/number.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/number.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/object.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/object.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/object.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/optional.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/optional.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/optional.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/pipeline.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/pipeline.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/pipeline.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/promise.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/promise.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/promise.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/record.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/record.js'
    }
  },
  linked: Promise {
    [Array(4): null prototype] [
      [ModuleJob],
      [ModuleJob],
      [ModuleJob],
      [ModuleJob]
    ]
  },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/record.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/set.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/set.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/set.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/string.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/string.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/string.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/tuple.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/tuple.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/tuple.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/undefined.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/undefined.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/undefined.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/union.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/union.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/union.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/unknown.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/unknown.js'
    }
  },
  linked: Promise { [Array(0): null prototype] [] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/unknown.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parser
s/readonly.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rsers/readonly.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
ers/readonly.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/parseD
ef.js',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pa
rseDef.js'
    }
  },
  linked: Promise { [Array(2): null prototype] [ [ModuleJob], [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/pars
eDef.js'
  }
}
ESM 40188: async addJobsToDependencyGraph() file:///Users/milkoslavov/workspace/home/shelly-forge/dist/comman
ds/mcp.js ModuleJob {
  importAttributes: [Object: null prototype] {},
  isMain: false,
  inspectBrk: false,
  url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Refs.j
s',
  modulePromise: Promise {
    ModuleWrap {
      sourceMapURL: undefined,
      url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Re
fs.js'
    }
  },
  linked: Promise { [Array(1): null prototype] [ [ModuleJob] ] },
  instantiated: undefined,
  module: ModuleWrap {
    sourceMapURL: undefined,
    url: 'file:///Users/milkoslavov/workspace/home/shelly-forge/node_modules/zod-to-json-schema/dist/esm/Refs
.js'
  }
}
STREAM 40188: resume
STREAM 40188: resume false
STREAM 40188: read 0
STREAM 40188: need readable false
STREAM 40188: length less than watermark true
STREAM 40188: do read
NET 40188: _read - n 0 isConnecting? false hasHandle? true
NET 40188: Socket._handle.readStart
STREAM 40188: flow
STREAM 40188: read undefined
STREAM 40188: need readable true
STREAM 40188: length less than watermark true
STREAM 40188: reading, ended or constructing false
STREAM 40188: push <Buffer 0a>
STREAM 40188: maybeReadMore read 0
STREAM 40188: read 0
STREAM 40188: need readable true
STREAM 40188: length less than watermark true
STREAM 40188: do read
NET 40188: _read - n 0 isConnecting? false hasHandle? true
===== MCP STDOUT =====
DEBUG: Loaded command tool: build
DEBUG: Loaded command tool: create
DEBUG: Loaded command tool: debug
DEBUG: Loaded command tool: deploy
DEBUG: Loaded command tool: discover
DEBUG: Loaded command tool: init
DEBUG: Loaded command tool: logs
DEBUG: Loaded command tool: mcp
DEBUG: Starting Shelly Forge MCP server...
Current working directory: /Users/milkoslavov/workspace/home/shelly-forge
Environment variables: {
  "NVM_INC": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/include/node",
  "TERM_PROGRAM": "vscode",
  "NVM_CD_FLAGS": "-q",
  "TERM": "xterm-256color",
  "SHELL": "/bin/zsh",
  "HOMEBREW_REPOSITORY": "/opt/homebrew",
  "TMPDIR": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/",
  "TERM_PROGRAM_VERSION": "0.48.7",
  "NODE_DEBUG": "*",
  "ZDOTDIR": "/Users/milkoslavov",
  "CURSOR_TRACE_ID": "690078bf20804b1da911d4f92b7af32c",
  "ORIGINAL_XDG_CURRENT_DESKTOP": "undefined",
  "MallocNanoZone": "0",
  "ZSH": "/Users/milkoslavov/.oh-my-zsh",
  "NVM_DIR": "/Users/milkoslavov/.nvm",
  "USER": "milkoslavov",
  "LS_COLORS": "di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",
  "COMMAND_MODE": "unix2003",
  "SSH_AUTH_SOCK": "/private/tmp/com.apple.launchd.bBE2kiGuND/Listeners",
  "__CF_USER_TEXT_ENCODING": "0x1F5:0x0:0x0",
  "PAGER": "less",
  "LSCOLORS": "Gxfxcxdxbxegedabagacad",
  "PATH": "/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/versions/node/v22.11.0/b
in:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:
/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.c
ryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/applei
nternal/bin:/Library/Apple/usr/bin:/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/
versions/node/v22.11.0/bin:/Users/milkoslavov/.foundry/bin",
  "USER_ZDOTDIR": "/Users/milkoslavov",
  "__CFBundleIdentifier": "com.todesktop.230313mzl4w4u92",
  "PWD": "/Users/milkoslavov/workspace/home/shelly-forge",
  "LANG": "en_US.UTF-8",
  "VSCODE_GIT_ASKPASS_EXTRA_ARGS": "",
  "XPC_FLAGS": "0x0",
  "XPC_SERVICE_NAME": "0",
  "VSCODE_INJECTION": "1",
  "SHLVL": "2",
  "HOME": "/Users/milkoslavov",
  "VSCODE_GIT_ASKPASS_MAIN": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass-mai
n.js",
  "HOMEBREW_PREFIX": "/opt/homebrew",
  "LESS": "-R",
  "LOGNAME": "milkoslavov",
  "VSCODE_GIT_IPC_HANDLE": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/vscode-git-893f8cbfaf.sock",
  "NVM_BIN": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin",
  "VSCODE_GIT_ASKPASS_NODE": "/Applications/Cursor.app/Contents/Frameworks/Cursor Helper (Plugin).app/Content
s/MacOS/Cursor Helper (Plugin)",
  "GIT_ASKPASS": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass.sh",
  "INFOPATH": "/opt/homebrew/share/info:/opt/homebrew/share/info:",
  "HOMEBREW_CELLAR": "/opt/homebrew/Cellar",
  "DEBUG": "*",
  "COLORTERM": "truecolor",
  "_": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin/node"
}
Starting Shelly Forge MCP Server...
DEBUG: Loaded command tool: build
DEBUG: Loaded command tool: create
DEBUG: Loaded command tool: debug
DEBUG: Loaded command tool: deploy
DEBUG: Loaded command tool: discover
DEBUG: Loaded command tool: init
DEBUG: Loaded command tool: logs
DEBUG: Loaded command tool: mcp
Loaded 8 command tools
Registered tool: build
Registered tool: create
Registered tool: debug
Registered tool: deploy
Registered tool: discover
Registered tool: init
Registered tool: logs
Registered tool: mcp
Connecting MCP Server transport...
Shelly Forge MCP Server running and connected.
===== CONSOLE LOG =====
[2025-04-06T10:49:43.010Z] DEBUG: Loaded command tool: build
[2025-04-06T10:49:43.012Z] DEBUG: Loaded command tool: create
[2025-04-06T10:49:43.055Z] DEBUG: Loaded command tool: debug
[2025-04-06T10:49:43.061Z] DEBUG: Loaded command tool: deploy
[2025-04-06T10:49:43.134Z] DEBUG: Loaded command tool: discover
[2025-04-06T10:49:43.254Z] DEBUG: Loaded command tool: init
[2025-04-06T10:49:43.255Z] DEBUG: Loaded command tool: logs
[2025-04-06T10:49:43.269Z] DEBUG: Loaded command tool: mcp
[2025-04-06T10:49:43.269Z] DEBUG: Starting Shelly Forge MCP server...
[2025-04-06T10:49:43.270Z] Current working directory: /Users/milkoslavov/workspace/home/shelly-forge
[2025-04-06T10:49:43.270Z] Environment variables: {
  "NVM_INC": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/include/node",
  "TERM_PROGRAM": "vscode",
  "NVM_CD_FLAGS": "-q",
  "TERM": "xterm-256color",
  "SHELL": "/bin/zsh",
  "HOMEBREW_REPOSITORY": "/opt/homebrew",
  "TMPDIR": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/",
  "TERM_PROGRAM_VERSION": "0.48.7",
  "NODE_DEBUG": "*",
  "ZDOTDIR": "/Users/milkoslavov",
  "CURSOR_TRACE_ID": "690078bf20804b1da911d4f92b7af32c",
  "ORIGINAL_XDG_CURRENT_DESKTOP": "undefined",
  "MallocNanoZone": "0",
  "ZSH": "/Users/milkoslavov/.oh-my-zsh",
  "NVM_DIR": "/Users/milkoslavov/.nvm",
  "USER": "milkoslavov",
  "LS_COLORS": "di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43",
  "COMMAND_MODE": "unix2003",
  "SSH_AUTH_SOCK": "/private/tmp/com.apple.launchd.bBE2kiGuND/Listeners",
  "__CF_USER_TEXT_ENCODING": "0x1F5:0x0:0x0",
  "PAGER": "less",
  "LSCOLORS": "Gxfxcxdxbxegedabagacad",
  "PATH": "/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/versions/node/v22.11.0/b
in:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:
/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.c
ryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/applei
nternal/bin:/Library/Apple/usr/bin:/Users/milkoslavov/Downloads/google-cloud-sdk/bin:/Users/milkoslavov/.nvm/
versions/node/v22.11.0/bin:/Users/milkoslavov/.foundry/bin",
  "USER_ZDOTDIR": "/Users/milkoslavov",
  "__CFBundleIdentifier": "com.todesktop.230313mzl4w4u92",
  "PWD": "/Users/milkoslavov/workspace/home/shelly-forge",
  "LANG": "en_US.UTF-8",
  "VSCODE_GIT_ASKPASS_EXTRA_ARGS": "",
  "XPC_FLAGS": "0x0",
  "XPC_SERVICE_NAME": "0",
  "VSCODE_INJECTION": "1",
  "SHLVL": "2",
  "HOME": "/Users/milkoslavov",
  "VSCODE_GIT_ASKPASS_MAIN": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass-mai
n.js",
  "HOMEBREW_PREFIX": "/opt/homebrew",
  "LESS": "-R",
  "LOGNAME": "milkoslavov",
  "VSCODE_GIT_IPC_HANDLE": "/var/folders/3b/sjb5mlm94jbc46fgs9g8p3lh0000gn/T/vscode-git-893f8cbfaf.sock",
  "NVM_BIN": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin",
  "VSCODE_GIT_ASKPASS_NODE": "/Applications/Cursor.app/Contents/Frameworks/Cursor Helper (Plugin).app/Content
s/MacOS/Cursor Helper (Plugin)",
  "GIT_ASKPASS": "/Applications/Cursor.app/Contents/Resources/app/extensions/git/dist/askpass.sh",
  "INFOPATH": "/opt/homebrew/share/info:/opt/homebrew/share/info:",
  "HOMEBREW_CELLAR": "/opt/homebrew/Cellar",
  "DEBUG": "*",
  "COLORTERM": "truecolor",
  "_": "/Users/milkoslavov/.nvm/versions/node/v22.11.0/bin/node"
}
[2025-04-06T10:49:43.270Z] Starting Shelly Forge MCP Server...
[2025-04-06T10:49:43.270Z] DEBUG: Loaded command tool: build
[2025-04-06T10:49:43.270Z] DEBUG: Loaded command tool: create
[2025-04-06T10:49:43.270Z] DEBUG: Loaded command tool: debug
[2025-04-06T10:49:43.270Z] DEBUG: Loaded command tool: deploy
[2025-04-06T10:49:43.270Z] DEBUG: Loaded command tool: discover
[2025-04-06T10:49:43.271Z] DEBUG: Loaded command tool: init
[2025-04-06T10:49:43.271Z] DEBUG: Loaded command tool: logs
[2025-04-06T10:49:43.271Z] DEBUG: Loaded command tool: mcp
[2025-04-06T10:49:43.271Z] Loaded 8 command tools
[2025-04-06T10:49:43.271Z] Registered tool: build
[2025-04-06T10:49:43.271Z] Registered tool: create
[2025-04-06T10:49:43.271Z] Registered tool: debug
[2025-04-06T10:49:43.271Z] Registered tool: deploy
[2025-04-06T10:49:43.271Z] Registered tool: discover
[2025-04-06T10:49:43.271Z] Registered tool: init
[2025-04-06T10:49:43.271Z] Registered tool: logs
[2025-04-06T10:49:43.271Z] Registered tool: mcp
[2025-04-06T10:49:43.271Z] Connecting MCP Server transport...
[2025-04-06T10:49:43.271Z] Shelly Forge MCP Server running and connected.

```

---

The MCP server is failing silently, likely due to process termination or stdio communication issues. Here's what I recommend to fix the issue:

1. Try creating an MCP server that uses a different transport method than stdio. In your case, the issue is likely because Cursor is trying to communicate with your project via stdio, but your server is also using stdio, causing a conflict.

2. Modify `.cursor/mcp.json` to use a different method to communicate with your MCP server, such as via HTTP or a socket.

3. Add explicit error event handlers to capture any issues with the transports:

---

```diff
          try {
              const transport = new StdioServerTransport();
+             
+             // Add explicit error handling for transport
+             process.stdin.on('error', (error) => {
+                 logger.error("STDIN error event", error);
+             });
+             
+             process.stdout.on('error', (error) => {
+                 logger.error("STDOUT error event", error);
+             });
+             
+             process.on('uncaughtException', (error) => {
+                 logger.error("Uncaught exception", error);
+             });
+             
              await mcp.connect(transport);
              logger.log("Shelly Forge MCP Server running and connected.");
```

---

Let's build one more time and run our debug script:

---

```bash
npm run build && ./debug-mcp.sh
```

---



---

